# InnerWorld Edu - AI Quest Builder ðŸŽ®ðŸ¤–

**Node-based Ð²Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€ ÐºÐ²ÐµÑÑ‚Ð¾Ð² Ñ AI Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð¼**

---

## ðŸŽ¯ Ð§Ñ‚Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾

### âœ… Backend (FastAPI + GPT-4)
- **QuestBuilderAgent** - AI Ð°Ð³ÐµÐ½Ñ‚ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð³Ñ€Ð°Ñ„Ð¾Ð² ÐºÐ²ÐµÑÑ‚Ð¾Ð²
- **GPT-4 Function Calling** - Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ nodes/edges
- **REST API** - `/api/builder/*` endpoints
- **PostgreSQL Ð¼Ð¾Ð´ÐµÐ»Ð¸** - Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð³Ñ€Ð°Ñ„Ð¾Ð² Ð² JSONB
- **Conversation Flow** - 6 ÑÑ‚Ð°Ð´Ð¸Ð¹ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð° Ñ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÐµÐ¼

### âœ… Frontend (React + React Flow)
- **AIQuestBuilder** - Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ 3 Ð¿Ð°Ð½ÐµÐ»ÑÐ¼Ð¸
- **React Flow Canvas** - Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð³Ñ€Ð°Ñ„Ð¾Ð²
- **Chat Interface** - Ñ‡Ð°Ñ‚ Ñ AI Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð¼
- **5 Ñ‚Ð¸Ð¿Ð¾Ð² ÑƒÐ·Ð»Ð¾Ð²**:
  - ðŸŸ¢ Start (Ð½Ð°Ñ‡Ð°Ð»Ð¾)
  - ðŸ”µ QuestStep (ÑˆÐ°Ð³ ÐºÐ²ÐµÑÑ‚Ð°)
  - ðŸŸ¡ Choice (Ð²Ñ‹Ð±Ð¾Ñ€/Ð²ÐµÑ‚Ð²Ð»ÐµÐ½Ð¸Ðµ)
  - ðŸŸ£ RealityBridge (Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸)
  - ðŸ”´ End (ÐºÐ¾Ð½ÐµÑ†)

### âœ… AI Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€ Ð¿ÑÐ¸Ñ…Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð¼ÐµÑ‚Ð¾Ð´Ð¾Ð²
- ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð¸ (Ð¼ÑƒÐ´Ñ€Ð°Ñ ÑÐ¾Ð²Ð°, ÐºÑ€Ð¸ÑÑ‚Ð°Ð»Ð» Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ð¸ Ñ‚.Ð´.)
- Ð›Ð¾ÐºÐ°Ñ†Ð¸Ð¸ (7 Ð¼ÐµÑÑ‚ ÐŸÐ¾Ð½Ð¸Ð¼Ð°Ð»Ð¸Ð¸)
- ÐÐ´Ð°Ð¿Ñ‚Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð´ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ Ð¸ ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ñ€ÐµÐ±ÐµÐ½ÐºÐ°

---

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ
```bash
# Python 3.11+
python --version

# Node.js 18+
node --version

# PostgreSQL 15+
psql --version
```

### 1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Backend

```bash
cd /home/user/inner_edu/backend

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
pip install -r requirements.txt

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ .env Ñ„Ð°Ð¹Ð»
cat > .env << EOF
OPENAI_API_KEY=your_openai_api_key_here
DATABASE_URL=postgresql+asyncpg://user:password@localhost/innerworld_edu
EOF

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ FastAPI ÑÐµÑ€Ð²ÐµÑ€
python main.py
```

Backend Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑÑ Ð½Ð° `http://localhost:8000`
Swagger docs: `http://localhost:8000/docs`

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° PostgreSQL

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…
psql -U postgres
CREATE DATABASE innerworld_edu;
\q

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ (TODO: ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Alembic Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸)
# ÐŸÐ¾ÐºÐ° Ð±Ð°Ð·Ð° ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐµ
```

### 3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Frontend

```bash
cd /home/user/inner_edu/frontend

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
npm install

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ dev ÑÐµÑ€Ð²ÐµÑ€
npm run dev
```

Frontend Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑÑ Ð½Ð° `http://localhost:5173`

---

## ðŸ“– ÐšÐ°Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ

### Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ²ÐµÑÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· AI

1. **ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ** `http://localhost:5173` Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
2. **ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³** Ñ AI:
   ```
   ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: Ð¥Ð¾Ñ‡Ñƒ ÐºÐ²ÐµÑÑ‚ Ð¿Ñ€Ð¾ Ñ„Ð¾Ñ‚Ð¾ÑÐ¸Ð½Ñ‚ÐµÐ·
   AI: ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð»ÐµÑ‚ Ñ‚Ð²Ð¾ÐµÐ¼Ñƒ Ñ€ÐµÐ±ÐµÐ½ÐºÑƒ?
   ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: 8 Ð»ÐµÑ‚
   AI: ÐšÐ°ÐºÐ¸Ðµ Ñƒ Ð½ÐµÐ³Ð¾ ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸?
   ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: ÐŸÐ»Ð¾Ñ…Ð¾ Ð·Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÑ‚
   AI: Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ ÑˆÐ°Ð³Ð¾Ð² Ð² ÐºÐ²ÐµÑÑ‚Ðµ? (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÑŽ 5-7)
   ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: 5
   AI: Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÑŽ ÐºÐ²ÐµÑÑ‚... âœ¨
   ```

3. **Ð£Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ð³Ñ€Ð°Ñ„** - AI ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð²Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð³Ñ€Ð°Ñ„ ÐºÐ²ÐµÑÑ‚Ð°:
   ```
   [Start] â†’ [Ð¡Ð¾Ð²Ð° Ð¾Ð±ÑŠÑÑÐ½ÑÐµÑ‚] â†’ [Ð’Ñ‹Ð±Ð¾Ñ€?] â†’ [Ð­ÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚] â†’ [Reality Bridge]
                                      â†“
                                [ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ Ð¿ÑƒÑ‚ÑŒ] ----â†—
   ```

4. **Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ** (TODO):
   - ÐšÐ»Ð¸Ðº Ð½Ð° ÑƒÐ·ÐµÐ» â†’ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚ÐµÐºÑÑ‚
   - Drag & drop Ð½Ð¾Ð²Ñ‹Ñ… ÑƒÐ·Ð»Ð¾Ð²
   - ÐŸÐ¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ AI ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ»

---

## ðŸ—ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Frontend (React + Vite)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Chat    â”‚  â”‚  React Flow  â”‚  â”‚   Node   â”‚ â”‚
â”‚  â”‚   Panel   â”‚  â”‚    Canvas    â”‚  â”‚  Editor  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚
         â”‚ HTTP POST      â”‚ WebSocket (TODO)
         â”‚ /api/builder/  â”‚
         â†“                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Backend (FastAPI)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     QuestBuilderAgent (GPT-4)          â”‚   â”‚
â”‚  â”‚  â€¢ Conversation Flow Management        â”‚   â”‚
â”‚  â”‚  â€¢ Graph Generation (Function Calling) â”‚   â”‚
â”‚  â”‚  â€¢ Node Refinement                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  PostgreSQL (JSONB)    â”‚                   â”‚
â”‚  â”‚  â€¢ quest_builder_sessions                  â”‚
â”‚  â”‚  â€¢ quests (graph_structure)                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”‘ API Endpoints

### POST /api/builder/chat
Ð§Ð°Ñ‚ Ñ AI Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð¼
```json
{
  "user_id": "user-123",
  "message": "Ð¥Ð¾Ñ‡Ñƒ ÐºÐ²ÐµÑÑ‚ Ð¿Ñ€Ð¾ Ñ„Ð¾Ñ‚Ð¾ÑÐ¸Ð½Ñ‚ÐµÐ·",
  "session_id": "optional-uuid"
}
```
**ÐžÑ‚Ð²ÐµÑ‚:**
```json
{
  "ai_response": "ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð»ÐµÑ‚ Ñ‚Ð²Ð¾ÐµÐ¼Ñƒ Ñ€ÐµÐ±ÐµÐ½ÐºÑƒ?",
  "stage": "collecting_info",
  "session_id": "uuid",
  "graph": null  // Ð¸Ð»Ð¸ {nodes: [], edges: []} ÐºÐ¾Ð³Ð´Ð° Ð³Ð¾Ñ‚Ð¾Ð²
}
```

### GET /api/builder/session/{session_id}
ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð° Ð¸ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð³Ñ€Ð°Ñ„

### POST /api/builder/generate_graph
ÐŸÑ€Ð¸Ð½ÑƒÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð³Ñ€Ð°Ñ„Ð°

### POST /api/builder/refine_node
Ð£Ð»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ» Ñ‡ÐµÑ€ÐµÐ· AI

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

```
inner_edu/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py                 # FastAPI app
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ builder.py          # Builder endpoints
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ models.py           # SQLAlchemy Ð¼Ð¾Ð´ÐµÐ»Ð¸
â”‚   â”‚   â””â”€â”€ __init__.py         # DB connection
â”‚   â”œâ”€â”€ quest_builder/
â”‚   â”‚   â””â”€â”€ agent.py            # QuestBuilderAgent (GPT-4)
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ AIQuestBuilder/
â”‚   â”‚   â”‚       â””â”€â”€ index.tsx   # Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ quest.ts        # TypeScript Ñ‚Ð¸Ð¿Ñ‹
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â””â”€â”€ docs/
    â””â”€â”€ backlog/current/02-FEAT-AI-QUEST-BUILDER-UGC/
        â””â”€â”€ impl/IP-01-full-stack-ugc-platform.md
```

---

## ðŸŽ¨ Ð¢Ð¸Ð¿Ñ‹ ÑƒÐ·Ð»Ð¾Ð² Ð³Ñ€Ð°Ñ„Ð°

### 1. StartNode (Ð·ÐµÐ»ÐµÐ½Ñ‹Ð¹ ÐºÑ€ÑƒÐ³)
```typescript
{
  id: "start_1",
  type: "start",
  position: {x: 250, y: 50},
  data: {
    title: "Ð¢Ð°Ð¹Ð½Ð° Ñ„Ð¾Ñ‚Ð¾ÑÐ¸Ð½Ñ‚ÐµÐ·Ð°",
    description: "Ð£Ð·Ð½Ð°Ð¹ ÐºÐ°Ðº Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÑŽÑ‚ ÑÐ½ÐµÑ€Ð³Ð¸ÑŽ"
  }
}
```

### 2. QuestStepNode (ÑÐ¸Ð½Ð¸Ð¹ Ð¿Ñ€ÑÐ¼Ð¾ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¸Ðº)
```typescript
{
  id: "step_1",
  type: "questStep",
  position: {x: 250, y: 150},
  data: {
    character: "wise_owl",
    location: "forest_memory",
    psychological_method: "metaphor",
    dialogue: "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð’Ð¸Ð´Ð¸ÑˆÑŒ ÑÑ‚Ð¾Ñ‚ Ð»Ð¸ÑÑ‚? ÐžÐ½ ÐºÐ°Ðº ÑÐ¾Ð»Ð½ÐµÑ‡Ð½Ð°Ñ Ð±Ð°Ñ‚Ð°Ñ€ÐµÐ¹ÐºÐ°..."
  }
}
```

### 3. ChoiceNode (Ð¶ÐµÐ»Ñ‚Ñ‹Ð¹ Ñ€Ð¾Ð¼Ð±)
```typescript
{
  id: "choice_1",
  type: "choice",
  position: {x: 250, y: 300},
  data: {
    question: "Ð¥Ð¾Ñ‡ÐµÑˆÑŒ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ ÐºÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚?",
    options: [
      {text: "Ð”Ð°, Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾!", next: "step_2"},
      {text: "Ð Ð°ÑÑÐºÐ°Ð¶Ð¸ Ð¿Ð¾Ð·Ð¶Ðµ", next: "step_3"}
    ]
  }
}
```

### 4. RealityBridgeNode (Ñ„Ð¸Ð¾Ð»ÐµÑ‚Ð¾Ð²Ñ‹Ð¹ ÑˆÐµÑÑ‚Ð¸ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¸Ðº)
```typescript
{
  id: "rb_1",
  type: "realityBridge",
  position: {x: 250, y: 450},
  data: {
    description: "ÐŸÐ¾ÑÐ°Ð´Ð¸ ÑÐµÐ¼Ñ Ð¸ Ð½Ð°Ð±Ð»ÑŽÐ´Ð°Ð¹ Ð·Ð° Ð½Ð¸Ð¼ 3 Ð´Ð½Ñ",
    deadline_hours: 72,
    reminder_hours: 24
  }
}
```

### 5. EndNode (ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹ ÐºÑ€ÑƒÐ³)
```typescript
{
  id: "end_1",
  type: "end",
  position: {x: 250, y: 600},
  data: {
    message: "ÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÑŽ! Ð¢Ñ‹ Ð¿Ð¾Ð½ÑÐ» Ñ‡Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ Ñ„Ð¾Ñ‚Ð¾ÑÐ¸Ð½Ñ‚ÐµÐ·!",
    xp: 100
  }
}
```

---

## ðŸ§ª Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

### Ð¢ÐµÑÑ‚ API Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ
```bash
# ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð´Ð¸Ð°Ð»Ð¾Ð³
curl -X POST http://localhost:8000/api/builder/chat \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "test-user",
    "message": "Ð¥Ð¾Ñ‡Ñƒ ÐºÐ²ÐµÑÑ‚ Ð¿Ñ€Ð¾ Ñ„Ð¾Ñ‚Ð¾ÑÐ¸Ð½Ñ‚ÐµÐ·"
  }'

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ swagger docs
open http://localhost:8000/docs
```

### Ð¢ÐµÑÑ‚ Frontend
```bash
# ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
open http://localhost:5173

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ¸ (F12)
```

---

## ðŸš§ TODO (ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸)

### Backend
- [ ] Alembic Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð´Ð»Ñ Ð‘Ð”
- [ ] ÐœÐ¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° (OpenAI Moderation API + GPT-4)
- [ ] Endpoints Ð´Ð»Ñ CRUD ÐºÐ²ÐµÑÑ‚Ð¾Ð²
- [ ] ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ graph â†’ YAML Ð´Ð»Ñ StateManager
- [ ] User authentication

### Frontend
- [ ] NodeEditor ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ (Ð¿Ñ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ)
- [ ] Drag & drop Ð½Ð¾Ð²Ñ‹Ñ… ÑƒÐ·Ð»Ð¾Ð²
- [ ] Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑƒÐ·Ð»Ð¾Ð²
- [ ] ÐšÐ½Ð¾Ð¿ÐºÐ° "Ð£Ð»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑƒÐ·ÐµÐ» Ñ‡ÐµÑ€ÐµÐ· AI"
- [ ] ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ layout (dagre.js)
- [ ] ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð° ÑƒÐ·Ð»Ð°
- [ ] Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ÐºÐ²ÐµÑÑ‚Ð°

### Integration
- [ ] Telegram Bot Ð¾Ð±ÐµÑ€Ñ‚ÐºÐ°
- [ ] Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¼ StateManager
- [ ] Reality Bridge Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· APScheduler
- [ ] Quest Feed (Ð»ÐµÐ½Ñ‚Ð° ÐºÐ²ÐµÑÑ‚Ð¾Ð²)
- [ ] Parent Dashboard

---

## ðŸŽ“ ÐšÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

### Flow ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ²ÐµÑÑ‚Ð°

```
1. Ð Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ â†’ "Ð¥Ð¾Ñ‡Ñƒ ÐºÐ²ÐµÑÑ‚ Ð¿Ñ€Ð¾ Ñ„Ð¾Ñ‚Ð¾ÑÐ¸Ð½Ñ‚ÐµÐ·"
   â†“
2. AI â†’ Ð·Ð°Ð´Ð°ÐµÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ (Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚, ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸, ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑˆÐ°Ð³Ð¾Ð²)
   â†“
3. AI â†’ ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð² quest_context
   â†“
4. AI â†’ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ ÑÑ‚Ð°Ð´Ð¸ÑŽ "generating"
   â†“
5. GPT-4 Function Calling â†’ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ {nodes: [], edges: []}
   â†“
6. Backend â†’ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð³Ñ€Ð°Ñ„ Ð² session.current_graph (JSONB)
   â†“
7. Frontend â†’ Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ñ‚ Ð³Ñ€Ð°Ñ„ Ð² React Flow
   â†“
8. Ð Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ â†’ Ð²Ð¸Ð´Ð¸Ñ‚ Ð¼Ð°Ð¹Ð½Ð´-ÐºÐ°Ñ€Ñ‚Ñƒ ÐºÐ²ÐµÑÑ‚Ð°, Ð¼Ð¾Ð¶ÐµÑ‚ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ
   â†“
9. Ð Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ â†’ "Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" â†’ Ð³Ñ€Ð°Ñ„ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð² YAML
   â†“
10. ÐšÐ²ÐµÑÑ‚ â†’ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð½Ð° Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸ÑŽ â†’ Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐµÑ‚ÑÑ
```

---

## ðŸ¤ Ð’ÐºÐ»Ð°Ð´ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚

Ð­Ñ‚Ð¾ MVP Ð¿Ñ€Ð¾ÐµÐºÑ‚. Ð¡Ð»ÐµÐ´ÑƒÐ¹ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð°Ð¼:
- **Simplicity First** - Ð²Ñ‹Ð±Ð¸Ñ€Ð°Ð¹ Ð¿Ñ€Ð¾ÑÑ‚ÐµÐ¹ÑˆÐµÐµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ
- **YAGNI** - Ð½Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐ¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ "Ð½Ð° Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ"
- **No backward compatibility** - Ð½Ð° MVP ÑÑ‚Ð°Ð´Ð¸Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð»Ð¾Ð¼Ð°Ñ‚ÑŒ API

---

## ðŸ“ License

Proprietary - InnerWorld Edu Platform

---

## ðŸ› Known Issues

1. **ÐÐµÑ‚ Alembic Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹** - Ð±Ð°Ð·Ð° Ð¿Ð¾ÐºÐ° Ð½Ðµ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸
2. **ÐÐµÑ‚ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸** - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ hardcoded user_id
3. **graph â†’ YAML ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ** - Ð½Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð° (TODO)
4. **Node Editor** - Ð¿Ñ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð½Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð°
5. **Auto-layout** - ÑƒÐ·Ð»Ñ‹ Ð½Ðµ Ñ€Ð°ÑÑÑ‚Ð°Ð²Ð»ÑÑŽÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· dagre

---

## ðŸ’¡ Tips

- **Ð”Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ AI** - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
- **React Flow Canvas** - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Zoom (Ctrl+Scroll) Ð¸ Pan (Drag)
- **Ð•ÑÐ»Ð¸ Ð³Ñ€Ð°Ñ„ Ð½Ðµ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ** - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ Ñ‡Ñ‚Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ð» Ð½Ð° Ð²ÑÐµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ AI
- **PostgreSQL connection** - ÑƒÐ±ÐµÐ´Ð¸ÑÑŒ Ñ‡Ñ‚Ð¾ Ð±Ð°Ð·Ð° Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð° (`pg_isready`)

---

Ð£Ð´Ð°Ñ‡Ð¸ Ð² ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ ÐºÐ²ÐµÑÑ‚Ð¾Ð²! ðŸš€âœ¨
